<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="script.js"></script>
  <link rel="stylesheet" href="styles.css">
  <title>CogServer WebSocket Demo</title>
</head>
<body>
  <h1>CogServer WebSocket Demo</h1>
 <p>You can interact with a running CogServer with this web page.
    Be sure to start a cogserver first!  Try running it either from
    the command line:
<pre>
$ /usr/local/bin/cogserver
</pre>
    or from guile:
<pre>
$ guile
> (use-modules (opencog) (opencog cogserver))
> (start-cogserver)
</pre>
    or from python:
<pre>
$ python3
> import opencog, opencog.cogserver
> opencog.cogserver.startCogserver()
</pre>

Take a moment to visit the stats page at
<a href="http://localhost:18080/">http://localhost:18080/stats</a>.
 </p>
 <h2>Interact</h2>
 <p>
    You can interact with the websockets server below. There
    are four styles of interaction: JSON, Scheme, Python and
    bare s-expressions. Select the interaction mode and hit
    the "Connect" button. Change the mode by disconnecting and
    reconnecting.
 </p>
  <div>
    CogServer: <input type="text" id="server-box"><br>
    Endpoint:
      <select id="endpoint-menu">
        <option value="json">JSON</option>
        <option value="scm">Scheme</option>
        <option value="py">Python</option>
        <option value="sexpr">S-Expressions</option>
      </select>
    <br>
    Connected to server: <span id="connection">false</span><br>
    <input type="button" id="connectButton" value="Connect"><br>
    <br>
    <br>
    Type a command message in the text box, and then hit "enter".
    Some suggested messages are just below.
    <br>
    <br>
    Connection Type: <span id="endpoint"></span></br>
    CogServer URL: <span id="full-url"></span><br>
    Command: <input type="text" id="outgoing"><br>
    CogServer Reply: <span id="reply"></span><br>
  </div>
 <h2>Suggested Messages</h2>
 Try sending these messages:
 <h3>JSON</h3>
   The /json endpoint supports fifteen different commands for creating
   Atoms and Values, executing them, fetching them and so on. The
   reply messages are all formatted in JSON style.
   See the <a href="https://github.com/opencog/atomspace/tree/master/opencog/persist/json">JSON README</a>
   for full documentation.
     <table>
     <tr><td>JSON API Version:</td>
         <td><tt>AtomSpace.version()</tt></td></tr>
     <tr><td>Create a ConceptNode:</td>
         <td><tt>AtomSpace.makeAtom({"type": "Concept", "name": "foo"})</tt></td></tr>
     <tr><td>Fetch all Atoms:</td>
         <td><tt>AtomSpace.getAtoms("Atom", true)</tt></td></tr>
     <tr><td>Fetch all Atom Types:</td>
         <td><tt>AtomSpace.getSubTypes("TopType", true)</tt></td></tr>
     </table>
 <h3>Scheme</h3>
   The /scm endpoint is connected to an instance of the guile REPL
   shell. It runs all valid guile scheme expressions.
   See the <a href="https://wiki.opencog.org/w/Scheme">OpenCog Wiki</a>
   for full documentation.
     <table>
     <tr><td>Sanity check:</td>
         <td><tt>(+ 2 2)</tt></td></tr>
     <tr><td>Hello, World!</td>
         <td><tt>(display "Hello, World!\n")</tt></td></tr>
     <tr><td>Create a ConceptNode:</td>
         <td><tt>(Concept "bar")</tt></td></tr>
     <tr><td>Fetch all Atoms:</td>
         <td><tt>(cog-get-atoms 'Atom #t)</tt></td></tr>
     <tr><td>Print a Summary report:</td>
         <td><tt>(cog-report-counts)</tt></td></tr>
     </table>
 <h3>S-Expressions</h3>
   The /sexpr endpoint provides a custom set of fifteen commands
   Atoms and Values, executing them, fetching them and so on. The
   command names are identical to the equivalent Scheme API, commands
   except that these are written to run extremely fast.
   This endpoint is designed for high-throughput.  Syntax errors fail
   silently, and many successful commands do not return anything!
   See the <a href="https://github.com/opencog/atomspace/tree/master/opencog/persist/sexpr">Sexpr README</a>
   for full documentation.
     <table>
     <tr><td>AtomSpace Version:</td>
         <td><tt>(cog-version)</tt></td></tr>
     <tr><td>Create a ConceptNode:</td>
         <td><tt>(cog-set-tv! (Concept "zinger") (stv 1 0))</tt></td></tr>
     <tr><td>Fetch all Atoms:</td>
         <td><tt>(cog-get-atoms 'Atom #t)</tt></td></tr>
     <tr><td>Set a value on an Atom:</td>
         <td><tt>(cog-set-value! (Concept "foo") (Predicate "key") (FloatValue 1 2 3))</tt></td></tr>
     <tr><td>Get a value on an Atom:</td>
         <td><tt>(cog-value (Concept "foo") (Predicate "key"))</tt></td></tr>
     </table>
 <h3>Python</h3>
   The /py endpoint is attached to a full Python3 REPL shell. It accepts
   and will run all valid Python3 expressions. Note that most python
   expressions produce no output, and so running this demo can be
   a bit confusing. The default Python3 REPL does NOT import any of
   OpenCog python modules; you have to import them yourself.
   See the <a href="https://wiki.opencog.org/w/Python">OpenCog Wiki</a>
   for full documentation.
     <table>
     <tr><td>Hello, World!</td>
         <td><tt>print("Hello, World!\n")</tt></td></tr>
     <tr><td>Python initialization:</td>
         <td><tt>from opencog.atomspace import *<br>
                 from opencog.type_constructors import *<br>
                 set_default_atomspace(AtomSpace())</tt></td></tr>
     <tr><td>Create a ConceptNode:</td>
         <td><tt>cc = Concept("foo")<br>
                 print("Created this:", cc)</tt></td></tr>
     <tr><td>Fetch all Atoms:</td>
         <td><tt>spacey = AtomSpace()<br>
                 all = spacey.get_atoms_by_type(types.Atom, True)<br>
                 print("All of them", all)</tt></td></tr>
     </table>
<hr>
<h3>The End</h3>
</body>
</html>
